<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê´‘ì£¼ê´‘ì—­ì‹œ ë³´ì¡°ê¸ˆ ë° ì „ê¸°ì°¨ ë³´ê¸‰ ì¶”ì´</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <style>
    body { font-family: 'Apple SD Gothic Neo', sans-serif; background-color: #f9fafb; padding: 40px; color: #1f2937; }
    .chart-wrapper { max-width: 900px; margin: 0 auto; background: #ffffff; padding: 30px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
    h2 { text-align: center; font-size: 24px; font-weight: 800; color: #111827; margin-bottom: 30px; }
    .chart-container { position: relative; height: 400px; width: 100%; }
    .custom-legend { display: flex; justify-content: center; gap: 24px; margin-top: 20px; font-size: 14px; font-weight: 600; }
    .legend-item { display: flex; align-items: center; gap: 8px; }
    .box-blue { width: 18px; height: 10px; background-color: #7abfff; border-radius: 2px; }
    .line-blue { width: 20px; height: 3px; background-color: #2563eb; position: relative; }
    .line-blue::after { content: ''; position: absolute; width: 6px; height: 6px; background: #2563eb; border-radius: 50%; top: -1.5px; left: 7px; }
    .insight-box { max-width: 900px; margin: 30px auto 0; padding: 20px 25px; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border-left: 5px solid #2563eb; border-radius: 8px; }
    .insight-title { font-size: 17px; font-weight: bold; color: #1e40af; margin-bottom: 8px; }
    .insight-content { font-size: 15px; line-height: 1.6; color: #1e3a8a; }
  </style>
</head>
<body>
<div class="chart-wrapper">
  <h2>ê´‘ì£¼ê´‘ì—­ì‹œ ë³´ì¡°ê¸ˆ ë³€í™”ì™€ ì „ê¸°ì°¨ ë³´ê¸‰ ìƒìŠ¹ëŸ‰ ì¶”ì´</h2>
  <div class="chart-container">
    <canvas id="subsidyEvChart"></canvas>
  </div>
  <div class="custom-legend">
    <div class="legend-item"><div class="line-blue"></div><span>í‰ê·  ë³´ì¡°ê¸ˆ (ë§Œì›)</span></div>
    <div class="legend-item"><div class="box-blue"></div><span>ì „ê¸°ì°¨ ë³´ê¸‰ ìƒìŠ¹ëŸ‰ (ëŒ€)</span></div>
  </div>
</div>
<div class="insight-box">
  <div class="insight-title">ğŸ’¡ ë°ì´í„° ë¶„ì„ ê²°ê³¼</div>
  <div class="insight-content">ë³´ì¡°ê¸ˆ ê·œëª¨ì™€ ì „ê¸°ì°¨ ë³´ê¸‰ ìƒìŠ¹ëŸ‰ì€ ë°˜ë“œì‹œ ì •ë¹„ë¡€í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</div>
</div>
<script>
  window.onload = function() {
    Chart.register(ChartDataLabels);
    const ctx = document.getElementById('subsidyEvChart').getContext('2d');
    new Chart(ctx, {
      data: {
        labels: ['2021', '2022', '2023', '2024', '2025'],
        datasets: [
          {
            type: 'line',
            label: 'ë³´ì¡°ê¸ˆ (ë§Œì›)',
            data: [1213, 1948, 2023, 1760, 3122],
            yAxisID: 'y',
            borderColor: '#2563eb',
            backgroundColor: '#2563eb',
            borderWidth: 3, tension: 0.3, pointRadius: 5,
            datalabels: {
              align: 'bottom', // ë³´ì¡°ê¸ˆ ê¸€ì”¨ë¥¼ ê·¸ë˜í”„ ì•„ë˜ë¡œ ë‚´ë¦¼
              anchor: 'start',
              offset: 10
            }
          },
          {
            type: 'bar',
            label: 'ì „ê¸°ì°¨ ë³´ê¸‰ ìƒìŠ¹ëŸ‰ (ëŒ€)',
            data: [2413, 3515, 4192, 2735, 4042],
            yAxisID: 'y1',
            backgroundColor: '#7abfff',
            borderRadius: 4,
            barPercentage: 0.6,
            datalabels: {
              align: 'top', // ë§‰ëŒ€ ê·¸ë˜í”„ ê¸€ì”¨ëŠ” ë§‰ëŒ€ ìœ„ë¡œ ìœ ì§€
              anchor: 'end',
              offset: 4
            }
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        layout: { padding: { top: 30, bottom: 30 } },
        plugins: {
          legend: { display: false },
          datalabels: {
            formatter: (value, context) => context.dataset.type === 'line' ? value.toLocaleString() + 'ë§Œ' : value.toLocaleString() + 'ëŒ€',
            font: { size: 11, weight: 'bold' },
            color: (context) => context.dataset.type === 'line' ? '#2563eb' : '#6b7280'
          }
        },
        scales: {
          x: { grid: { display: false }, ticks: { font: { weight: 'bold' } } },
          y: { position: 'left', beginAtZero: true, suggestedMax: 4000, title: { display: true, text: 'ë³´ì¡°ê¸ˆ (ë§Œì›)' } },
          y1: { position: 'right', beginAtZero: true, suggestedMax: 5000, grid: { drawOnChartArea: false }, title: { display: true, text: 'ë³´ê¸‰ ìƒìŠ¹ëŸ‰ (ëŒ€)' } }
        }
      }
    });
  };
</script>
</body>
</html>