<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>광주광역시 보조금 변화와 전기차 보급 상승량 추이</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- DataLabels -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

  <style>
    .chart-container {
      width: 850px;
      margin: 0 auto;
    }
  </style>
</head>
<body>

<div class="chart-container">
  <canvas id="subsidyEvChart"></canvas>
</div>

<script>
  // Chart.js v4 필수
  Chart.register(ChartDataLabels);

  const ctx = document.getElementById('subsidyEvChart');

  new Chart(ctx, {
    data: {
      labels: ['2021', '2022', '2023', '2024', '2025'],
      datasets: [
        {
          type: 'line',
          label: '보조금 (만원)',
          data: [1213, 1948, 2023, 1760, 3122],
          yAxisID: 'y',
          borderColor: '#2563eb',
          backgroundColor: '#2563eb',
          borderWidth: 3,
          tension: 0.3,
          pointRadius: 4
        },
        {
          type: 'bar',
          label: '전기차 보급 상승량 (대)',
          data: [2413, 3515, 4192, 2735, 4042],
          yAxisID: 'y1',
          backgroundColor: '#7abfff'
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'top'
        },
        title: {
          display: true,
          text: '광주광역시 보조금 변화와 전기차 보급 상승량 추이 (2021~2025)'
        },
        datalabels: {
          formatter: (value, context) => {
            return context.dataset.label.includes('보조금')
              ? value + '만원'
              : value + '대';
          },
          anchor: 'end',
          align: 'top',
          font: {
            size: 11,
            weight: 'bold'
          }
        }
      },
      scales: {
        x: {
          title: {
            display: true,
            text: '연도'
          }
        },
        y: {
          position: 'left',
          title: {
            display: true,
            text: '보조금 (만원)'
          }
        },
        y1: {
          position: 'right',
          grid: {
            drawOnChartArea: false
          },
          title: {
            display: true,
            text: '전기차 보급 상승량 (대)'
          }
        }
      }
    }
  });
</script>

</body>
</html>
